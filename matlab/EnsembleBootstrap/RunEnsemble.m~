% Code for implementation of ensemble using fitctree

load 'bikeShareData.mat';

m = 100; % number of sub-sample spaces that has to be created
n = 20000; % size of individual sub-sample space
p = 7; % parameter of random forest model

train_all = [bikes_train labels_train];

for k = 1:m
    subspace_train = datasample(train_all, n);
    models(k) = 1; % train(subspace_train(:, 1:12))
end

y_model = 
for t = 1:size(labels_test, 2)
    for k = 1:m
        y_model(k) = 1; %predict(models(k), bikes_test(t, :));
    end
    y(t) = mode(y_model);
    if y(t) == labels_test(t)
        accuracy = accuracy + 1;
    end
end

accuracy = 100*accuracy/size(labels_test, 2);